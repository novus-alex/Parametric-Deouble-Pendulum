#include "Servo.h"

#define ZERO 90
#define PI 3.14

float w = 7.9;
float ampl_ = 50;
int del;

float sin_[50] = {20.0,22.55754323369012,25.07309167819015,27.505340097587485,29.814351040078755,31.962210609824318,33.91365101206973,35.6366296493606,37.10285526010692,38.28825246031625,39.17335706073321,39.743635668289,39.98972432401376,39.907582258983965,39.49855824363647,38.76936844099521,37.731986127460004,36.40344509193912,34.80555994150631,32.964567906155764,30.91069802421098,28.677674782351165,26.302164360472418,23.82317257402745,21.281404399614257,18.71859560038574,16.17682742597256,13.697835639527597,11.322325217648839,9.08930197578903,7.035432093844236,5.194440058493699,3.596554908060887,2.26801387254,1.2306315590047956,0.5014417563635276,0.09241774101603539,0.010275675986242128,0.2563643317109965,0.8266429392667907,1.7117475396837434,2.8971447398930716,4.363370350639402,6.086348987930261,8.037789390175675,10.185648959921243,12.494659902412508,14.92690832180985,17.442456766309885,19.999999999999996};

Servo servo;

void setup() {
  Serial.begin(9600);
  servo.attach(10);
  servo.write(ZERO);
}

void loop() {
  if (Serial.available() > 0) {
    String data = Serial.readString();
    del = data.indexOf(";");
    String angle = data.substring(0,del);
    String ampl = data.substring(del + 1, -1);
    w = angle.toFloat();
    ampl_ = ampl.toFloat();
    servo.write(ZERO + ampl_);
    delay(PI / w * 1000);
    servo.write(ZERO);
    delay(PI / w * 1000);
  }
  servo.write(ZERO + ampl_);
  delay(PI / w * 1000);
  servo.write(ZERO);
  delay(PI / w * 1000);
}
